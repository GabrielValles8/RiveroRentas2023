{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/rentas.service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/forms\";\nexport let ContactoClienteComponent = /*#__PURE__*/(() => {\n  class ContactoClienteComponent {\n    constructor(rently, http) {\n      this.rently = rently;\n      this.http = http;\n      this.url = \"https://www.riverorenta.mx/api/rently/rently_api.php\";\n      this.urlToken = \"https://multimarca.gruporivero.com/oauth/token\";\n      this.urlApi = \"https://multimarca.gruporivero.com/api/v1/rently\";\n      this.correo = \"\";\n      this.cliente = \"\";\n      this.telefono = \"\";\n      this.body = \"\";\n      this.footer = \"\";\n      this.comentarios = \"\";\n      this.bcc = \"\";\n      this.subject = \"\";\n\n      if (!sessionStorage.getItem('token')) {\n        console.log(\"entra\");\n        var formData = new FormData();\n        formData.append(\"grant_type\", 'password');\n        formData.append(\"client_id\", '95d42dee-0c62-4f0e-a116-5540682870bd');\n        formData.append(\"client_secret\", 'Tbbs4uff8OW2PodlQLcQlUwboTQcJQ7lcIFdHSob');\n        formData.append(\"username\", 'ecasas2@gruporivero.com');\n        formData.append(\"password\", 'Rivero2022!');\n        const headers = {\n          \"Accept\": 'application/json'\n        };\n        this.http.post(this.urlToken, formData, {\n          headers: headers\n        }).subscribe({\n          next: data => {\n            const token = data.access_token;\n            sessionStorage.setItem(\"token\", token);\n          },\n          error: error => console.log(error)\n        });\n      }\n    }\n\n    ngOnInit() {}\n\n    createAuthorizationHeader() {\n      return {\n        \"Accept\": 'application/json',\n        \"Authorization\": 'Bearer ' + sessionStorage.getItem('token')\n      };\n    }\n\n    sendContactNuevo() {\n      let correoCliente = this.correo;\n      this.body = \"<h1>RIVERO RENTAS CONTACTO</h1>\" + \"<h4>INFORMACION DE CONTACTO</h4>\" + \"<table width='600px;' BORDER CELLPADDING=10 CELLSPACING=0>\" + \"<tr><th colspan=2 bgcolor='#BDBDBD'>CLIENTE</th></tr>\" + \"<tr><th>Nombre:</th><td>\" + this.cliente + \"</td></tr>\" + \"<tr><th>Correo:</th><td>\" + this.correo + \"</td></tr>\" + \"<tr><th>Telefono:</th><td>\" + this.telefono + \"</td></tr>\" + \"<tr><th colspan=2 bgcolor='#BDBDBD'>INFORMACIÓN</th></tr>\" + \"<tr><th>Comentarios:</th><td>\" + this.comentarios + \"</td></tr>\" + \"</table>\";\n      this.subject = this.cliente + \" SE HA CONTACTADO CON NOSOTROS.\";\n      this.cliente = \", \" + this.cliente + \" se ha contactado con nosotros.\";\n      this.bcc = \"inforenta@gruporivero.com\";\n      this.correo = \"rentasflotillas@gruporivero.com\";\n\n      if (/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\\.[A-Za-z]+$/.test(this.correo) && this.cliente != \"\" && correoCliente != \"\") {\n        this.loadedSpiner = true;\n        this.rently.enviarContactoNuevo(this.correo, this.cliente, this.subject, this.body, this.footer, this.bcc).subscribe(response => {\n          this.loadedSpiner = false;\n\n          if (response != 'error') {\n            window.location.href = '';\n          } else {\n            alert(\"Hubo un problema con el envío de tus datos, intenta más tarde.\");\n          }\n        });\n      } else {\n        alert(\"Campos vacíos\");\n      }\n    }\n\n  }\n\n  ContactoClienteComponent.ɵfac = function ContactoClienteComponent_Factory(t) {\n    return new (t || ContactoClienteComponent)(i0.ɵɵdirectiveInject(i1.RentasService), i0.ɵɵdirectiveInject(i2.HttpClient));\n  };\n\n  ContactoClienteComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ContactoClienteComponent,\n    selectors: [[\"app-contacto-cliente\"]],\n    decls: 18,\n    vars: 0,\n    consts: [[1, \"form-row\"], [1, \"form-group\", \"col-12\"], [\"type\", \"text\", \"placeholder\", \"Nombre y apellidos\", 1, \"form-control\", 3, \"change\"], [\"clienteI\", \"\"], [1, \"form-group\", \"col-6\"], [\"type\", \"email\", \"placeholder\", \"Correo\", 1, \"form-control\", 3, \"change\"], [\"correoI\", \"\"], [\"type\", \"textr\", \"placeholder\", \"Tel\\u00E9fono\", 1, \"form-control\", 3, \"change\"], [\"telefonoI\", \"\"], [\"placeholder\", \"Deja tu mensaje (opcional)\", \"rows\", \"5\", 1, \"form-control\", 3, \"change\"], [\"comentariosI\", \"\"], [1, \"row\", \"justify-content-center\"], [1, \"col-5\"], [1, \"boton\", \"boton-primario\", \"text-center\", 3, \"click\"]],\n    template: function ContactoClienteComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r4 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"form\")(1, \"div\", 0)(2, \"div\", 1)(3, \"input\", 2, 3);\n        i0.ɵɵlistener(\"change\", function ContactoClienteComponent_Template_input_change_3_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r0 = i0.ɵɵreference(4);\n\n          return ctx.cliente = _r0.value;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"input\", 5, 6);\n        i0.ɵɵlistener(\"change\", function ContactoClienteComponent_Template_input_change_6_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r1 = i0.ɵɵreference(7);\n\n          return ctx.correo = _r1.value;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 4)(9, \"input\", 7, 8);\n        i0.ɵɵlistener(\"change\", function ContactoClienteComponent_Template_input_change_9_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r2 = i0.ɵɵreference(10);\n\n          return ctx.telefono = _r2.value;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 1)(12, \"textarea\", 9, 10);\n        i0.ɵɵlistener(\"change\", function ContactoClienteComponent_Template_textarea_change_12_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r3 = i0.ɵɵreference(13);\n\n          return ctx.comentarios = _r3.value;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(14, \"div\", 11)(15, \"div\", 12)(16, \"div\", 13);\n        i0.ɵɵlistener(\"click\", function ContactoClienteComponent_Template_div_click_16_listener() {\n          return ctx.sendContactNuevo();\n        });\n        i0.ɵɵtext(17, \"Enviar\");\n        i0.ɵɵelementEnd()()();\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm],\n    encapsulation: 2\n  });\n  return ContactoClienteComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let RentasService = /*#__PURE__*/(() => {\n  class RentasService {\n    constructor(http) {\n      this.http = http;\n      this.url = \"https://www.riverorenta.mx/api/rently/rently_api.php\";\n      this.urlToken = \"https://multimarca.gruporivero.com/oauth/token\";\n      this.urlApi = \"https://multimarca.gruporivero.com/api/v1/rently\";\n\n      if (!sessionStorage.getItem('token')) {\n        console.log(\"entra\");\n        var formData = new FormData();\n        formData.append(\"grant_type\", 'password');\n        formData.append(\"client_id\", '95d42dee-0c62-4f0e-a116-5540682870bd');\n        formData.append(\"client_secret\", 'Tbbs4uff8OW2PodlQLcQlUwboTQcJQ7lcIFdHSob');\n        formData.append(\"username\", 'ecasas2@gruporivero.com');\n        formData.append(\"password\", 'Rivero2022!');\n        const headers = {\n          \"Accept\": 'application/json'\n        };\n        this.http.post(this.urlToken, formData, {\n          headers: headers\n        }).subscribe({\n          next: data => {\n            const token = data.access_token;\n            sessionStorage.setItem(\"token\", token);\n          },\n          error: error => console.log(error)\n        });\n      }\n    }\n\n    createAuthorizationHeader() {\n      return {\n        \"Accept\": 'application/json',\n        \"Authorization\": 'Bearer ' + sessionStorage.getItem('token')\n      };\n    }\n\n    postQuery(data) {\n      const url = \"https://www.riverorenta.mx/api/rently/rently_api.php\";\n      return this.http.post(url, data);\n    }\n\n    getInitialSearch(from, to) {\n      const headers = this.createAuthorizationHeader();\n      const body = {\n        from: from,\n        to: to,\n        fromPlace: 6\n      };\n      return this.http.get(this.urlApi + '/initialSearch', {\n        headers: headers,\n        params: body\n      });\n    }\n\n    getReservacion(from, to, modelid) {\n      const data = {\n        q: 'enviaReservacion',\n        from: from,\n        to: to,\n        modelid: parseInt(modelid)\n      };\n      const dato = {\n        data: data\n      }; //return this.postQuery(data);\n\n      return this.http.post(this.url, dato);\n    }\n\n    getAdicionales(from, to, modelid) {\n      const headers = this.createAuthorizationHeader();\n      const body = {\n        from: from,\n        to: to,\n        modelId: parseInt(modelid),\n        category: 16\n      };\n      return this.http.get(this.urlApi + '/additional', {\n        headers: headers,\n        params: body\n      });\n    }\n\n    getCategorias() {\n      const headers = this.createAuthorizationHeader(); //const body={from: from+' 10:00', to: to+' 10:00', fromPlace: 6}\n      //console.log(body);\n      //return this.http.get<any>(this.urlApi+'/initialSearch',{headers:headers,params:body});\n\n      return this.http.get(this.urlApi + '/categories', {\n        headers: headers\n      });\n    }\n\n    getPromociones() {\n      const data = {\n        q: \"getPromociones\"\n      };\n      const headers = this.createAuthorizationHeader();\n      const param = {\n        data: data\n      };\n      console.log(this.url); // return this.http.get<any>(this.urlApi+'/promociones',{headers:headers, });\n\n      return this.http.post(this.url, param);\n    }\n\n    reservar(additionals, from, to, modelid, nombre, email, telefono) {\n      const data = {\n        \"q\": 'reservar',\n        Additionals: additionals,\n        From: from,\n        To: to,\n        Modelid: parseInt(modelid),\n        Customer: {\n          Name: nombre,\n          EmailAddress: email,\n          CellPhone: telefono,\n          DocumentId: '4568623147'\n        }\n      };\n      const dato = {\n        data: data\n      };\n      return this.http.post(this.url, dato);\n    }\n\n    checkout(email, nombre, modeloName, total) {\n      let date = new Date();\n      const data = {\n        successUrl: \"\",\n        cancelUrl: \"https://www.riverorenta.mx/api/netpay/cancelCheckout\",\n        customerEmail: email,\n        customerName: nombre,\n        paymentMethodTypes: [\"card\"],\n        merchantRefCode: \"Renta-\" + date.getTime(),\n        lineItems: [{\n          name: \"Reserva \" + modeloName,\n          amount: parseFloat(total),\n          quantity: 1,\n          currency: \"MXN\"\n        }],\n        linkType: \"NETPAY_CHECKOUT\"\n      };\n      return this.http.post(\"https://www.riverorenta.mx/api/netpay/sendCheckout/\", JSON.stringify(data));\n    }\n\n    enviarContacto(nombre, correo, telefono, comentarios) {\n      const data = {\n        nombre: nombre,\n        correo: correo,\n        telefono: telefono,\n        comentarios: comentarios\n      };\n      const dato = {\n        data: data\n      };\n      console.log(data, \"este es data\");\n      return this.http.post(\"https://www.riverorenta.mx/api/rently/send_mail_contact.php\", dato);\n    }\n\n    enviarContactoRenta(nombre, empresa, correo, telefono, comentarios) {\n      const data = {\n        nombre: nombre,\n        empresa: empresa,\n        correo: correo,\n        telefono: telefono,\n        comentarios: comentarios\n      };\n      const dato = {\n        data: data\n      };\n      return this.http.post(\"https://www.riverorenta.mx/api/rently/send_mail_contact_empresarial.php\", dato);\n    }\n\n    enviarContactoNuevo(correo, cliente, subject, body, footer, bcc) {\n      const headers = this.createAuthorizationHeader();\n      const data = {\n        to: correo,\n        clientName: cliente,\n        subject: subject,\n        body: body,\n        footer: footer,\n        bcc: bcc\n      };\n      const dato = {\n        data: data\n      };\n      return this.http.post(\"https://multimarca.gruporivero.com/api/v1/send/email\", data, {\n        headers: headers\n      });\n    }\n\n  }\n\n  RentasService.ɵfac = function RentasService_Factory(t) {\n    return new (t || RentasService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  RentasService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: RentasService,\n    factory: RentasService.ɵfac,\n    providedIn: 'root'\n  });\n  return RentasService;\n})();","map":null,"metadata":{},"sourceType":"module"}